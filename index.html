<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maniiw AI</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .chat-container { width: 95%; max-width: 400px; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; flex-direction: column; overflow: hidden; }
        .chat-header { background: #007bff; color: white; padding: 15px; text-align: center; font-weight: bold; font-size: 1.1rem; }
        #chat-box { height: 400px; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .message { padding: 10px 15px; border-radius: 15px; max-width: 80%; line-height: 1.4; word-wrap: break-word; font-size: 0.95rem; }
        .ai-msg { background: #e9ecef; align-self: flex-start; border-bottom-left-radius: 2px; color: #333; }
        .user-msg { background: #007bff; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
        .input-area { display: flex; padding: 10px; border-top: 1px solid #ddd; background: #fff; }
        input { flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 25px; outline: none; }
        button { background: #007bff; color: white; border: none; padding: 0 20px; margin-left: 8px; border-radius: 25px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="chat-container">
    <div class="chat-header">Maniiw AI Assistant</div>
    <div id="chat-box">
        <div class="message ai-msg">Assalam-o-Alaikum! Main Maniiw ka AI hoon. Poochiye jo dil chahe!</div>
    </div>
    <div class="input-area">
        <input type="text" id="user-input" placeholder="Yahan likhein...">
        <button onclick="sendMessage()">Bhejein</button>
    </div>
</div>

<script>
    // Aapki API Key yahan set kar di gayi hai
    const API_KEY = "AIzaSyCe_nrWIEpbdnU9au6hYNnNQxmrlauJr9k"; 

    async function sendMessage() {
        const inputField = document.getElementById('user-input');
        const chatBox = document.getElementById('chat-box');
        const userText = inputField.value.trim();

        if (userText === "") return;

        // User ka message screen par dikhao
        chatBox.innerHTML += `<div class="message user-msg">${userText}</div>`;
        inputField.value = "";
        chatBox.scrollTop = chatBox.scrollHeight;

        // AI ko "Typing..." dikhao jab tak jawab aaye
        const typingDiv = document.createElement("div");
        typingDiv.className = "message ai-msg";
        typingDiv.innerText = "...";
        chatBox.appendChild(typingDiv);
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: `Tumhara naam 'Maniiw AI' hai. Tumhe 'Maniiw' ne banaya hai. Hamesha friendly Urdu aur Hindi mix mein jawab do. Agar koi pooche tum kaun ho ya kisne banaya, to Maniiw ka naam zaroor lo. User ne pucha hai: ${userText}` }]
                    }]
                })
            });

            const data = await response.json();
            const aiResponse = data.candidates[0].content.parts[0].text;

            // Typing wala dot hata kar asli jawab likho
            typingDiv.innerText = aiResponse;
        } catch (error) {
            typingDiv.innerText = "Maaf kijiyega, lagta hai internet mein kuch masla hai.";
        }
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Enter key support
    document.getElementById('user-input').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') sendMessage();
    });
</script>

</body>
</html>
