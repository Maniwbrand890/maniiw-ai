<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta AI - Maniiw</title>
    <style>
        body { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; background-color: #f0f2f5; margin: 0; display: flex; justify-content: center; height: 100vh; }
        .chat-container { width: 100%; max-width: 500px; background: #efe7dd; display: flex; flex-direction: column; position: relative; border: 1px solid #ddd; }
        .header { background: #008069; color: white; padding: 12px 15px; display: flex; align-items: center; gap: 12px; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .status { font-size: 0.7rem; font-weight: 400; display: block; color: #d1d1d1; }
        #chat-box { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .message { padding: 8px 12px; border-radius: 8px; max-width: 85%; font-size: 0.95rem; line-height: 1.4; box-shadow: 0 1px 1px rgba(0,0,0,0.1); word-wrap: break-word; }
        .user-msg { background: #dcf8c6; align-self: flex-end; border-top-right-radius: 0; }
        .ai-msg { background: #ffffff; align-self: flex-start; border-top-left-radius: 0; }
        .typing { font-size: 0.8rem; color: #667781; margin-left: 20px; margin-bottom: 10px; font-style: italic; }
        .input-area { background: #f0f2f5; padding: 10px 15px; display: flex; align-items: center; gap: 10px; }
        input { flex: 1; padding: 12px 18px; border-radius: 25px; border: 1px solid #fff; outline: none; font-size: 1rem; }
        button { background: #00a884; color: white; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: 0.3s; }
        button:active { transform: scale(0.9); background: #008069; }
    </style>
</head>
<body>

<div class="chat-container">
    <div class="header">
        <div style="width:38px; height:38px; background:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#008069; font-weight:bold; font-size:1.2rem;">M</div>
        <div>Maniiw AI (Meta Mode)<span class="status">online</span></div>
    </div>
    
    <div id="chat-box">
        <div class="message ai-msg">Assalam-o-Alaikum! Main Maniiw ka Meta AI hoon. Main aapki kaise madad kar sakta hoon? ðŸ˜Š</div>
    </div>

    <div id="status-text"></div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Type a message..." autocomplete="off">
        <button onclick="sendMessage()">âž¤</button>
    </div>
</div>

<script>
    const API_KEY = "AIzaSyAYhZYzcUmZrOKLUpB7Fxbc5_3c1yabdt8"; 

    async function sendMessage() {
        const input = document.getElementById('user-input');
        const box = document.getElementById('chat-box');
        const statusDiv = document.getElementById('status-text');
        const text = input.value.trim();
        if (!text) return;

        box.innerHTML += `<div class="message user-msg">${text}</div>`;
        input.value = "";
        box.scrollTop = box.scrollHeight;

        statusDiv.innerHTML = `<div class="typing">Maniiw AI is typing...</div>`;

        try {
            // UPDATED URL: v1beta and gemini-1.5-flash
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: `Tum ek Meta AI ho jise Maniiw ne banaya hai. Friendly Urdu aur Hindi mix mein jawab do. Har bar apna talluq Maniiw se zaroor batao aur short jawab do. User says: ${text}` }] }]
                })
            });

            const data = await response.json();
            statusDiv.innerHTML = "";

            if (data.candidates && data.candidates[0].content.parts[0].text) {
                const reply = data.candidates[0].content.parts[0].text;
                box.innerHTML += `<div class="message ai-msg">${reply}</div>`;
            } else {
                box.innerHTML += `<div class="message ai-msg">Oops! Kuch masla hua hai. Dobara type karein.</div>`;
            }
        } catch (e) {
            statusDiv.innerHTML = "";
            box.innerHTML += `<div class="message ai-msg">Network error! Internet check karein.</div>`;
        }
        box.scrollTop = box.scrollHeight;
    }

    document.getElementById('user-input').addEventListener('keypress', (e) => { if (e.key === 'Enter') sendMessage(); });
</script>

</body>
</html>
